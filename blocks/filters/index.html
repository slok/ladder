<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Filters - Ladder docs</title>
    <meta name="generator" content="Hugo 0.17" />

    
    <meta name="description" content="A flexible and reliable autoscaler">
    
    <link rel="canonical" href="https://themotion.github.io/ladder/blocks/filters/">
    
    <meta name="author" content="TheMotion">
    

    <meta property="og:url" content="https://themotion.github.io/ladder/blocks/filters/">
    <meta property="og:title" content="Ladder docs">
    <meta property="og:image" content="https://themotion.github.io/ladder/img/logo.png">
    <meta name="apple-mobile-web-app-title" content="Ladder docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://themotion.github.io/ladder/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://themotion.github.io/ladder/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://themotion.github.io/ladder/fonts/icon.eot?52m981');
        src: url('https://themotion.github.io/ladder/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://themotion.github.io/ladder/fonts/icon.woff?52m981')
               format('woff'),
             url('https://themotion.github.io/ladder/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://themotion.github.io/ladder/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://themotion.github.io/ladder/stylesheets/application.css">
    <link rel="stylesheet" href="https://themotion.github.io/ladder/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://themotion.github.io/ladder/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://themotion.github.io/ladder/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://themotion.github.io/ladder/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-deep-purple palette-accent-light-blue">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Filters
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/themotionvideo" title="@themotionvideo on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/themotion" title="@themotion on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/themotion/ladder" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://themotion.github.io/ladder/img/logo.png">
        </div>
      
      <div class="name">
        <strong>Ladder docs <span class="version">0.1.0</span></strong>
        
          <br>
          themotion/ladder
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/themotion/ladder/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/themotion/ladder/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    <span class="section">Introduction</span>
    <ul>
      
        
        



<a  title="Overview" href="https://themotion.github.io/ladder/introduction/overview/">
	
	Overview
</a>



      
        
        



<a  title="Installing" href="https://themotion.github.io/ladder/introduction/installing/">
	
	Installing
</a>



      
        
        



<a  title="Quickstart" href="https://themotion.github.io/ladder/introduction/quickstart/">
	
	Quickstart
</a>



      
    </ul>
  
</li>



<li>
  
    <span class="section">Concepts</span>
    <ul>
      
        
        



<a  title="Autoscaler" href="https://themotion.github.io/ladder/concepts/autoscaler/">
	
	Autoscaler
</a>



      
        
        



<a  title="Blocks" href="https://themotion.github.io/ladder/concepts/blocks/">
	
	Blocks
</a>



      
    </ul>
  
</li>



<li>
  
    <span class="section">Available Blocks</span>
    <ul>
      
        
        



<a  title="Gatherers" href="https://themotion.github.io/ladder/blocks/gatherers/">
	
	Gatherers
</a>



      
        
        



<a  title="Arrangers" href="https://themotion.github.io/ladder/blocks/arrangers/">
	
	Arrangers
</a>



      
        
        



<a  title="Solvers" href="https://themotion.github.io/ladder/blocks/solvers/">
	
	Solvers
</a>



      
        
        



<a  title="Filters" href="https://themotion.github.io/ladder/blocks/filters/">
	
	Filters
</a>



      
        
        



<a  title="Scalers" href="https://themotion.github.io/ladder/blocks/scalers/">
	
	Scalers
</a>



      
    </ul>
  
</li>



<li>
  
    <span class="section">Operating</span>
    <ul>
      
        
        



<a  title="Running" href="https://themotion.github.io/ladder/operating/running/">
	
	Running
</a>



      
        
        



<a  title="Configuration" href="https://themotion.github.io/ladder/operating/configuration/">
	
	Configuration
</a>



      
        
        



<a  title="Metrics" href="https://themotion.github.io/ladder/operating/metrics/">
	
	Metrics
</a>



      
        
        



<a  title="API" href="https://themotion.github.io/ladder/operating/api/">
	
	API
</a>



      
        
        



<a  title="Using as a framework" href="https://themotion.github.io/ladder/operating/framework/">
	
	Using as a framework
</a>



      
    </ul>
  
</li>



<li>
  
    



<a  title="License" href="https://github.com/themotion/ladder/blob/master/LICENSE">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/themotionvideo" target="_blank" title="@themotionvideo on Twitter">
              @themotionvideo on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/themotion" target="_blank" title="@themotion on GitHub">
              @themotion on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:tech-honey-badger@themotion.com" title="Email of tech-honey-badger@themotion.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Filters </h1>

			

<h2 id="dummy">Dummy</h2>

<p>Dummy filterer will return a concrete value</p>

<h3 id="name">Name</h3>

<p><code>dummy</code></p>

<h3 id="options">Options</h3>

<pre><code class="language-yaml">filters:
  - kind: dummy
    config:
</code></pre>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only used for testing</p>
</div>

<h2 id="limit">Limit</h2>

<p>Limit filterer will restrict the scalign value to the max and min configured limits</p>

<h3 id="name-1">Name</h3>

<p><code>limit</code></p>

<h3 id="options-1">Options</h3>

<ul>
<li><code>max</code>: The max value</li>
<li><code>min</code>: The min value</li>
</ul>

<h3 id="example">Example</h3>

<pre><code class="language-yaml">filters:
  - kind: limit
    config:
      max: 10
      min: 2
</code></pre>

<h2 id="ecs-running-tasks">ECS running tasks</h2>

<p>ECS running tasks filter will check how many tasks are pending by the ECS scheduler on a given
cluster, if this number exceeds the desired one then it will break the filters chain and set
the autoscaling to the current number.</p>

<h3 id="name-2">Name</h3>

<p><code>ecs_running_tasks</code></p>

<h3 id="options-2">Options</h3>

<ul>
<li><code>aws_region</code>: String that contains the target ECS cluster region</li>
<li><code>cluster_name</code>: String that contains the name of the target ECS cluster</li>
<li><code>max_pending_tasks_allowed</code>: integer that describes the maximum number of allowed not running tasks (or pending tasks)</li>
<li><code>max_checks</code>: Number of failed checks failing before continuing with a regular scalation besides the last check
(if max checks is 0 then its disabled)</li>
<li><code>error_on_max_checks</code>: Boolean, when max checks is triggered instead of scaling as a regular iteration besides of the
of the result it will return an error and stop this current iteration</li>
<li><code>when</code>: string (enum) can be <code>always</code>, <code>scale_up</code> or <code>scale_down</code> this will say when the filter will be applied</li>
</ul>

<pre><code class="language-yaml">filters:
  - kind: ecs_running_tasks
    config:
      aws_region: us-west-2
      cluster_name: slok-ECSCluster1-15OBYPKBNXIO6
      max_pending_tasks_allowed: 2
      max_checks: 5
      error_on_max_checks: false
      when: scale_down
</code></pre>

<h2 id="scaling-kind-interval">Scaling kind interval</h2>

<p>scaling kind iternval will allow or not scaling if the scaling mode has been
active for the configured duration. for example if you want to scaleup after 30 seconds
The autoscaler will need to be in scaleup for more than 30 seconds without interruption
(this is changing scaling mode), this allows us to omit spikes for the interval
we want</p>

<h3 id="name-3">Name</h3>

<p><code>scaling_kind_interval</code></p>

<h3 id="options-3">Options</h3>

<ul>
<li><code>scale_up_duration</code>: The duration of the scaling up mode need for triggering</li>
<li><code>scale_down_duration</code>: The duration of the scaling down mode need for triggering</li>
</ul>

<h3 id="example-1">Example</h3>

<pre><code class="language-yaml">filters:
  - kind: scaling_kind_interval
    config:
      scale_up_duration: 30s
      scale_down_duration: 1m

</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the BSD 3-clause &#39;New&#39; or &#39;Revised&#39; license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://themotion.github.io/ladder/blocks/scalers/" title="Scalers">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Scalers
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://themotion.github.io/ladder/blocks/solvers/" title="Solvers">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Solvers
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/themotion.github.io\/ladder\/';
      var repo_id  = 'themotion\/ladder';
    
    </script>

    <script src="https://themotion.github.io/ladder/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;
            
            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }
        

        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//gohugo.io/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
